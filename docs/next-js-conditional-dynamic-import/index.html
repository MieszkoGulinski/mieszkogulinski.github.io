<!doctype html><html lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><title>Next.js conditional dynamic import</title><style>body,html{margin:0 0}body{color:#222;font-size:18px;line-height:1.5}.header-content,article,footer{margin:0 auto;padding:0 15px;max-width:710px}h1{border-bottom:2px solid #ffd744;padding-bottom:15px;font-size:32px}.blog-name{text-align:center;padding-bottom:25px}h2{font-size:24px}h3{font-size:20px}a{text-decoration:none;color:#927200;transition:color .25s ease-out}a:hover{color:#bb9200}code{font-size:14px}pre{overflow:auto}img{max-width:100%}.footer-content{margin-top:15px;border-top:2px solid #ffd744;padding-top:15px;padding-bottom:15px}.art-list-link{font-size:22px;margin-bottom:5px}.art-list-link a{color:#222;transition:color .2s ease-out}.art-list-link a:hover{color:#555}.art-list-date{font-size:16px}@media (prefers-color-scheme:dark){body{background:#222;color:#fff}a{color:#ffd744}a:hover{color:#bb9200}.art-list-link a{color:#fff}.art-list-link a:hover{color:#eee}}@media (min-width:768px){body{font-size:20px}code{font-size:16px}}</style><link href="/img/favicon.svg" rel="icon" type="image/svg+xml"><link href="/img/favicon.ico" rel="alternate icon"></head><body><article><h1>Next.js conditional dynamic import</h1><p>While <a href="https://nextjs.org/docs/pages/building-your-application/optimizing/lazy-loading">it's not fully clear from documentation</a>, and a <a href="https://stackoverflow.com/questions/66791922/conditionally-import-module-using-next-js-dynamic-import-ssr-doesnt-work">Stack Overflow answer</a> doesn't provide that information explicitly enough, Next.js dynamic import can be used for <strong>conditional</strong> importing of React components.</p><p>Most examples of dynamic import are about a case where a component is displayed or not, like a modal opened on :</p><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> dynamic <span class="token keyword">from</span> <span class="token string">"next/dynamic"</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> Modal <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./Modal"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function function-variable">ComponentOpeningModal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">[</span>isOpen<span class="token punctuation">,</span> setIsOpen<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setIsModalOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">Open</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token punctuation">{</span>isOpen<span class="token operator">?</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span> <span class="token attr-name">onClose</span><span class="token language-javascript script"><span class="token punctuation script-punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setIsModalOpen</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">/></span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span><br><span class="token punctuation">}</span></code></pre><p>But let's not forget that it's also possible to conditionally import and display one of several available components.</p><h2>Example code</h2><p>For a moment let's forget about translation libraries, and let's suppose that we have several variants of components for multiple languages. In actual usage, dynamic import makes sense when the components are large, but for the purpose of this example, let's consider these examples:</p><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> GreetingEN<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function function-variable">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Nice to meet you&lt;div>;<br>export default GreetingEN;</span></code></pre><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> GreetingPL<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function function-variable">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Miło Cię poznać</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> GreetingPL<span class="token punctuation">;</span></code></pre><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> GreetingJA<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function function-variable">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">はぢめまして</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> GreetingJA<span class="token punctuation">;</span></code></pre><p>Let's augment the code with <code>console.log</code>:</p><pre class="language-tsx"><code class="language-tsx"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'import EN'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> GreetingEN<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function function-variable">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render EN'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Nice to meet you&lt;div><br>}<br>export default GreetingEN;</span></code></pre><pre class="language-tsx"><code class="language-tsx"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'import PL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> GreetingPL<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function function-variable">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render PL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">Miło Cię poznać</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token punctuation">}</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> GreetingPL<span class="token punctuation">;</span></code></pre><pre class="language-tsx"><code class="language-tsx"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'import JA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> GreetingJA<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function function-variable">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render JA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">はぢめまして</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br><span class="token punctuation">}</span><br><span class="token keyword">export</span> <span class="token keyword">default</span> GreetingJA<span class="token punctuation">;</span></code></pre><p>Let's create a component that imports and displays one of the available components:</p><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> dynamic <span class="token keyword">from</span> <span class="token string">"next/dynamic"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"next/router"</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> GreetingPL <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./GreetingPL"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> GreetingEN <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./GreetingPL"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> GreetingJA <span class="token operator">=</span> <span class="token function">dynamic</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"./GreetingJA"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> greetingsByLanguage <span class="token operator">=</span> <span class="token punctuation">{</span><br>  pl<span class="token operator">:</span> GreetingPL<span class="token punctuation">,</span><br>  en<span class="token operator">:</span> GreetingEN<span class="token punctuation">,</span><br>  ja<span class="token operator">:</span> GreetingJA<br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> Greeting<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function function-variable">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span> locale <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> GreetingComponent <span class="token operator">=</span> greetingsByLanguage<span class="token punctuation">[</span>locale<span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">GreetingComponent</span></span> <span class="token punctuation">/></span></span><br><span class="token punctuation">}</span></code></pre><p>In the browser console, when the locale is <code>en</code>, we can see <code>import EN</code> and <code>render EN</code>, but not <code>import PL</code> or <code>import JA</code>. After changing the locale of the displayed page, by clicking a <code>Link</code> component pointing to the same page but with a different locale, we can see the corresponding <code>import</code> and <code>render</code> messages.</p><p>It means that the dynamic import actually works for conditionally displaying React components.</p><a href="/">Go back to home page</a></article><footer><div class="footer-content"><a href="https://www.radcode.co/">Do you need an app?</a></div></footer><link href="/styles/prism-atom-dark.css" rel="stylesheet"></body></html>